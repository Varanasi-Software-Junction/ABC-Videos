 <!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Pure Cinema — Vertical Video Showcase (Cinematic + Preview)</title>
  <meta name="description" content="Six-video vertical showcase — cinematic reveal + muted preview autoplay when in view" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#fff;
      --ink:#0f172a;
      --muted:#6b7280;
      --accent:#ffb703;      /* saffron */
      --accent-dark:#d48a00;
      --card:#fbfbfb;
      --radius:12px;
      --maxw:1100px;
      --film-ease: cubic-bezier(.15,.9,.2,1);
      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:linear-gradient(180deg,#fff,#fcfbf8);color:var(--ink);-webkit-font-smoothing:antialiased;}
    .wrap{max-width:var(--maxw);margin:0 auto;padding:28px;}

    /* Header */
    header.hero{
      display:flex;flex-direction:column;gap:14px;align-items:flex-start;padding:28px;border-radius:16px;
      background:linear-gradient(180deg,rgba(255,183,3,0.06),rgba(255,255,255,0.02));
      margin-bottom:28px;
      box-shadow:0 10px 30px rgba(2,6,23,0.04);
    }
    .brand{display:flex;gap:14px;align-items:center;}
    .logo{width:64px;height:64px;border-radius:12px;display:grid;place-items:center;font-weight:800;
          background:linear-gradient(135deg,var(--accent),var(--accent-dark)); color:#082032; font-family:"Playfair Display",serif;}
    header h1{margin:0;font-family:"Playfair Display",serif;font-size:clamp(1.6rem,3.5vw,2.6rem);}
    header p.lead{margin:0;color:var(--muted);max-width:70ch;font-size:1.03rem;}

    /* Video cards container */
    .videos { display:flex;flex-direction:column; gap:18px; margin-bottom:36px; }

    /* Card baseline */
    .video-card{
      background:var(--card);
      border-radius:var(--radius);
      padding:14px;
      display:flex;
      flex-direction:column;
      gap:10px;
      box-shadow:0 8px 22px rgba(2,6,23,0.03);
      border:1px solid rgba(2,6,23,0.03);
      transform-origin:center;
      /* quiet starting state for cinematic reveal: slightly lower, slightly smaller, mostly transparent */
      opacity:0;
      transform: translateY(18px) scale(0.994) rotateX(0.6deg);
      transition:
        opacity 520ms var(--film-ease),
        transform 520ms var(--film-ease),
        box-shadow 520ms ease,
        filter 520ms ease;
      will-change: transform, opacity, box-shadow;
      position:relative;
      isolation:isolate;
      overflow:visible;
    }

    /* Card shown state: cinematic lift + zoom + shadow */
    .video-card.in-view{
      opacity:1;
      transform: translateY(-12px) scale(1.02) rotateX(0.4deg);
      box-shadow:0 26px 48px rgba(2,6,23,0.12);
      filter:brightness(1.02);
    }

    .video-card header{display:flex;align-items:center;justify-content:space-between;gap:12px;}
    .video-title{font-weight:700;}
    .video-desc{color:var(--muted);font-size:0.95rem;margin:0;}
    .video-el{width:100%;border-radius:10px;overflow:hidden;background:#000;position:relative;}

    /* actual <video> stays fluid; avoid animating large bitmaps where possible */
    .video-el video{width:100%;height:auto;display:block;background:#000;transform-origin:center;display:block;}

    /* sheen sweep: subtle film-like highlight on reveal
       created with a pseudo element so it doesn't repaint the video pixels themselves */
    .video-el::after{
      content:'';
      position:absolute;
      left:-120%;
      top:0;
      height:100%;
      width:60%;
      pointer-events:none;
      transform:translateX(0) skewX(-12deg);
      background:linear-gradient(90deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02), rgba(255,255,255,0.00));
      opacity:0;
    }

    /* when card appears, run a very short sweep */
    .video-card.in-view .video-el::after{
      animation: sheen 880ms var(--film-ease) 1;
      opacity:1;
    }

    @keyframes sheen{
      0% { left:-120%; opacity:0; transform:translateX(0) skewX(-12deg) }
      10% { opacity:0.85 }
      60% { left:120%; opacity:0.35; transform:translateX(0) skewX(-6deg) }
      100% { left:120%; opacity:0 }
    }

    /* View badge for testing (keeps previous behavior) */
    .view-badge{
      position:absolute;right:12px;top:12px;padding:6px 8px;border-radius:8px;font-weight:700;font-size:0.8rem;
      background:rgba(3,7,18,0.9); color:var(--accent); display:inline-flex;align-items:center;gap:8px;
      box-shadow:0 6px 18px rgba(2,6,23,0.12);
      opacity:0; transform:translateY(-6px); transition:opacity 260ms ease, transform 260ms ease;
      pointer-events:none;
      z-index:4;
    }
    .video-card.in-view .view-badge{ opacity:1; transform:translateY(0); }

    /* preview indicator while autoplay active */
    .preview-dot{
      width:8px;height:8px;border-radius:50%;background:var(--accent-dark);display:inline-block;
      box-shadow:0 4px 10px rgba(212,138,0,0.18);
      vertical-align:middle;margin-left:8px;opacity:0;transform:scale(.9);transition:opacity 220ms ease, transform 220ms ease;
    }
    .video-card.previewing .preview-dot{ opacity:1; transform:scale(1); }

    /* Summary & CTA */
    .summary{padding:20px;border-radius:12px;background:linear-gradient(180deg,#fff,#fff);box-shadow:0 8px 20px rgba(2,6,23,0.02);display:flex;gap:18px;align-items:center;justify-content:space-between;}
    .summary .text{max-width:70%;}
    .summary h3{margin:0;font-family:"Playfair Display",serif;}
    .summary p{margin:6px 0 0 0;color:var(--muted);}
    .cta-btn{background:var(--accent);border:none;padding:12px 16px;border-radius:10px;font-weight:800;color:#082032;cursor:pointer;box-shadow:0 12px 36px rgba(255,183,3,0.12);}

    /* Contact form (bottom) */
    .contact{margin-top:28px;padding:18px;border-radius:12px;background:#fff;border:1px solid rgba(2,6,23,0.03);}
    label{display:block;font-weight:600;margin-top:10px;margin-bottom:6px;}
    input,textarea{width:100%;padding:12px;border-radius:10px;border:1px solid rgba(2,6,23,0.06);font-size:0.95rem;}
    .contact .row{display:flex;gap:12px;}
    .contact .row > *{flex:1;}

    .muted{color:var(--muted);}
    .small{font-size:0.9rem;color:var(--muted);}

    @media (max-width:720px){
      .summary{flex-direction:column;align-items:flex-start;}
      .summary .text{max-width:100%;}
    }

    /* Reduced motion: remove transitions/animations and disable preview autoplay as accessibility measure */
    @media (prefers-reduced-motion: reduce){
      .video-card, .video-card.in-view, .video-el::after { transition: none !important; animation: none !important; transform:none !important; opacity:1 !important; }
    }

    /* Dev panel */
    .dev-panel{position:fixed;left:12px;bottom:12px;background:rgba(2,6,23,0.85);color:#fff;padding:8px 10px;border-radius:10px;font-size:0.85rem;z-index:9999}
    .dev-panel button{background:transparent;border:1px solid rgba(255,255,255,0.12);color:#fff;padding:6px 8px;border-radius:8px;cursor:pointer;font-weight:700}
  </style>
</head>
<body>
  <div class="wrap">

    <!-- Header -->
    <header class="hero" id="top">
      <div class="brand">
        <div class="logo">PC</div>
        <div>
          <div style="font-weight:800">PURE CINEMA</div>
          <div class="small muted">Vertical video showcase</div>
        </div>
      </div>

      <h1>Six-video vertical showcase</h1>
      <p class="lead">Scroll to reveal: each clip fades, lifts and gently zooms into view. When conditions allow, a muted preview will auto-play while the card is in view — it pauses when scrolled away.</p>
    </header>

    <!-- Videos list -->
    <section class="videos" aria-label="Video list">

      <!-- Video 0.webm -->
      <article class="video-card" id="card-0-webm">
        <div class="view-badge" aria-hidden="true">IN VIEW <span class="preview-dot" aria-hidden="true"></span></div>
        <header>
          <div>
            <div class="video-title">0.webm</div>
            <div class="video-desc small muted">Test clip — webm format. Replace this description with project-specific notes.</div>
          </div>
          <div class="small muted">Duration: —</div>
        </header>
        <div class="video-el" aria-hidden="false">
          <!-- preload metadata to allow quick preview start; autoplay will be muted programmatically -->
          <video controls preload="metadata" playsinline>
            <source src="videos/0.webm" type="video/webm">
            <source src="videos/0.mp4" type="video/mp4">
            Your browser does not support the video tag.
          </video>
        </div>
      </article>

      <!-- Video 0.mp4 -->
      <article class="video-card" id="card-0-mp4">
        <div class="view-badge" aria-hidden="true">IN VIEW <span class="preview-dot" aria-hidden="true"></span></div>
        <header>
          <div>
            <div class="video-title">0.mp4</div>
            <div class="video-desc small muted">MP4 copy of clip 0 — good for broad compatibility.</div>
          </div>
          <div class="small muted">Resolution: —</div>
        </header>
        <div class="video-el">
          <video controls preload="metadata" playsinline>
            <source src="videos/0.mp4" type="video/mp4">
            Your browser does not support the video tag.
          </video>
        </div>
      </article>

      <!-- Video 1.webm -->
      <article class="video-card" id="card-1-webm">
        <div class="view-badge" aria-hidden="true">IN VIEW <span class="preview-dot" aria-hidden="true"></span></div>
        <header>
          <div>
            <div class="video-title">1.webm</div>
            <div class="video-desc small muted">WebM version of clip 1.</div>
          </div>
          <div class="small muted">Notes: —</div>
        </header>
        <div class="video-el">
          <video controls preload="metadata" playsinline>
            <source src="videos/1.webm" type="video/webm">
            <source src="videos/1.mp4" type="video/mp4">
            Your browser does not support the video tag.
          </video>
        </div>
      </article>

      <!-- Video 1.mp4 -->
      <article class="video-card" id="card-1-mp4">
        <div class="view-badge" aria-hidden="true">IN VIEW <span class="preview-dot" aria-hidden="true"></span></div>
        <header>
          <div>
            <div class="video-title">1.mp4</div>
            <div class="video-desc small muted">MP4 variant of clip 1.</div>
          </div>
          <div class="small muted">Frame rate: —</div>
        </header>
        <div class="video-el">
          <video controls preload="metadata" playsinline>
            <source src="videos/1.mp4" type="video/mp4">
            Your browser does not support the video tag.
          </video>
        </div>
      </article>

      <!-- Video 2.webm -->
      <article class="video-card" id="card-2-webm">
        <div class="view-badge" aria-hidden="true">IN VIEW <span class="preview-dot" aria-hidden="true"></span></div>
        <header>
          <div>
            <div class="video-title">2.webm</div>
            <div class="video-desc small muted">WebM version of clip 2 — use for testing codecs.</div>
          </div>
          <div class="small muted">Codec: —</div>
        </header>
        <div class="video-el">
          <video controls preload="metadata" playsinline>
            <source src="videos/2.webm" type="video/webm">
            <source src="videos/2.mp4" type="video/mp4">
            Your browser does not support the video tag.
          </video>
        </div>
      </article>

      <!-- Video 2.mp4 -->
      <article class="video-card" id="card-2-mp4">
        <div class="view-badge" aria-hidden="true">IN VIEW <span class="preview-dot" aria-hidden="true"></span></div>
        <header>
          <div>
            <div class="video-title">2.mp4</div>
            <div class="video-desc small muted">MP4 of clip 2 — compatible with older browsers and devices.</div>
          </div>
          <div class="small muted">Bitrate: —</div>
        </header>
        <div class="video-el">
          <video controls preload="metadata" playsinline>
            <source src="videos/2.mp4" type="video/mp4">
            Your browser does not support the video tag.
          </video>
        </div>
      </article>

    </section>

    <!-- Summary + CTA -->
    <section class="summary" aria-labelledby="summary-heading">
      <div class="text">
        <h3 id="summary-heading">Quick summary</h3>
        <p class="muted">Six clips shown above for quick review. Pick a clip to play and note timecodes or frames you want graded or cut. Muted auto-preview helps quickly scan reels without noise — you can always unmute or manually play any clip.</p>
      </div>

      <div style="display:flex;flex-direction:column;gap:12px;align-items:flex-end;">
        <button class="cta-btn" id="ctaContact">Contact to Book a Review</button>
        <div class="small muted">Or email: <a href="mailto:hello@purecinema.example">hello@purecinema.example</a></div>
      </div>
    </section>

    <!-- Contact form (simple stub) -->
    <section class="contact" id="contactForm" aria-label="Contact form">
      <h3 style="margin:0 0 8px 0;">Contact / Project brief</h3>
      <form onsubmit="return false;">
        <label for="name">Full name</label>
        <input id="name" name="name" placeholder="Your name" required>

        <label for="email">Email</label>
        <input id="email" name="email" type="email" placeholder="you@example.com" required>

        <label for="notes">Notes / Which clip(s) — include timecodes</label>
        <textarea id="notes" name="notes" rows="4" placeholder="Example: clip 1.mp4 — 00:01:24 to 00:01:42 — please grade shadows"></textarea>

        <div style="display:flex;gap:10px;margin-top:12px;">
          <button class="cta-btn" id="sendBtn">Send request</button>
          <div class="small muted" id="formStatus">We'll reply within 48 hours.</div>
        </div>
      </form>
    </section>

  </div>

  <!-- small developer panel -->
  <div class="dev-panel" aria-hidden="true">
    Observer: <strong id="devStatus">active</strong>
    <button id="toggleObserver" title="Enable/disable observer" style="margin-left:8px">toggle</button>
  </div>

  <script>
    // ---------- Helpers: Network & accessibility checks ----------
    function allowsAutoPreview() {
      // Don't autoplay if user prefers reduced motion.
      if (window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches) return false;

      // Respect Save-Data and poor connections when possible.
      try {
        const nav = navigator;
        // navigator.connection may be undefined in some browsers
        const conn = nav.connection || nav.mozConnection || nav.webkitConnection;
        if (conn) {
          // If user has enabled Save-Data, avoid autoplaying previews.
          if (conn.saveData) return false;

          // effectiveType like '4g', '3g', '2g', 'slow-2g'.
          const et = (conn.effectiveType || '').toLowerCase();
          // Prefer autoplay on 4g (fast) or when type explicitly wifi.
          if (et === '4g' || (conn.type && conn.type.toLowerCase() === 'wifi')) return true;

          // otherwise avoid autoplay on weaker connections.
          return false;
        }
      } catch (e) {
        // fall through to default allow
      }

      // If we can't determine network, allow autoplay (muted) — browser will block if it disallows it
      return true;
    }

    // ---------- UI wiring ----------
    document.getElementById('ctaContact').addEventListener('click', () => {
      document.getElementById('contactForm').scrollIntoView({behavior:'smooth', block:'center'});
    });

    // Send simulation
    const sendBtn = document.getElementById('sendBtn');
    const formStatus = document.getElementById('formStatus');
    sendBtn.addEventListener('click', () => {
      sendBtn.disabled = true;
      sendBtn.textContent = 'Sending...';
      setTimeout(() => {
        sendBtn.disabled = false;
        sendBtn.textContent = 'Send request';
        formStatus.textContent = 'Request sent — we will reply within 48 hours.';
        document.getElementById('name').value = '';
        document.getElementById('email').value = '';
        document.getElementById('notes').value = '';
      }, 900);
    });

    // ---------- Video playback management ----------
    // Pause other videos when one plays (user-initiated or autoplay).
    function pauseAllExcept(currentVideo) {
      document.querySelectorAll('.video-el video').forEach((other) => {
        if (other !== currentVideo) {
          try { other.pause(); } catch(e) {}
          // clear preview flag visuals on other cards
          const oc = other.closest('.video-card');
          if (oc) oc.classList.remove('previewing');
        }
      });
    }

    // Track if a user manually played a video so we don't override user intent later.
    document.querySelectorAll('.video-el video').forEach((video) => {
      // Mark as user-initiated if the play event is trusted (user click/tap).
      video.addEventListener('play', (ev) => {
        if (ev.isTrusted) {
          video.__userPlayed = true;
          pauseAllExcept(video);
          // when user plays, visually indicate previewing state removed (we don't mark as previewing)
          const card = video.closest('.video-card');
          if (card) card.classList.remove('previewing');
        }
      });

      // Track manual unmute: if user unmutes, set a flag so we don't remute programmatically later.
      video.addEventListener('volumechange', () => {
        video.__userChangedMute = true;
      });

      // If playback ends naturally (or was paused), clear previewing visual.
      video.addEventListener('pause', () => {
        const card = video.closest('.video-card');
        if (card) card.classList.remove('previewing');
      });
      video.addEventListener('ended', () => {
        const card = video.closest('.video-card');
        if (card) card.classList.remove('previewing');
      });
    });

    // ---------- IntersectionObserver: reveal + preview ----------
    (function(){
      const cards = Array.from(document.querySelectorAll('.video-card'));
      if(!('IntersectionObserver' in window)) {
        // fallback: mark first card as in-view
        if(cards[0]) cards[0].classList.add('in-view');
        document.getElementById('devStatus').textContent = 'not-supported';
        return;
      }

      const canAutoPreview = allowsAutoPreview();
      // debug in dev panel
      document.getElementById('devStatus').textContent = canAutoPreview ? 'active (preview enabled)' : 'active (preview disabled)';

      const options = {
        root: null,
        rootMargin: '0px 0px -30% 0px', // trigger when card is roughly 45% visible
        threshold: 0.45
      };

      const onChange = (entries) => {
        entries.forEach(entry => {
          const elCard = entry.target;
          const video = elCard.querySelector('video');

          if (entry.isIntersecting) {
            // Add cinematic visible state
            elCard.classList.add('in-view');

            // Autoplay preview: only if allowed by heuristics and user hasn't played manually
            if (canAutoPreview && video && !video.__userPlayed && !video.__previewAttempted) {
              // remember preview attempted to avoid repeated attempts (helps for mobile & power/perf)
              video.__previewAttempted = true;

              // mute programmatically for autoplay; preserve flag if user already changed mute earlier
              const prevMuted = video.muted;
              if (!video.__userChangedMute) video.muted = true;

              // start preview; browsers may block programmatic play if not allowed — catch errors
              const playPromise = video.play();
              if (playPromise && typeof playPromise.then === 'function') {
                playPromise.then(() => {
                  // show preview visuals
                  elCard.classList.add('previewing');
                  pauseAllExcept(video);
                }).catch(() => {
                  // autoplay blocked — clear previewing state and fallback to no-op
                  elCard.classList.remove('previewing');
                });
              } else {
                // older browsers: assume play started
                elCard.classList.add('previewing');
                pauseAllExcept(video);
              }

              // if the user had previously unmuted, don't force restore; otherwise restore on pause/exit
              if (!video.__userChangedMute) {
                // restore muted state when preview ends or card leaves; handled on exit below
                video.__previewMutedInitially = prevMuted;
              }
            }
          } else {
            // remove cinematic visible state
            elCard.classList.remove('in-view');

            // If this video was previewing and NOT user-initiated, pause it and restore muted state
            if (video) {
              // If user played manually, don't pause (they likely want it playing)
              const shouldPause = !video.__userPlayed;
              if (shouldPause) {
                try { video.pause(); } catch (e) {}
                // restore mute if we changed it for preview
                if (!video.__userChangedMute && typeof video.__previewMutedInitially !== 'undefined') {
                  video.muted = !!video.__previewMutedInitially;
                }
              }
              elCard.classList.remove('previewing');
            }
          }
        });
      };

      const observer = new IntersectionObserver(onChange, options);
      cards.forEach(c => observer.observe(c));

      // Dev toggle
      const devStatus = document.getElementById('devStatus');
      const toggleBtn = document.getElementById('toggleObserver');
      let enabled = true;
      toggleBtn.addEventListener('click', () => {
        enabled = !enabled;
        if(enabled){
          cards.forEach(c => observer.observe(c));
          devStatus.textContent = canAutoPreview ? 'active (preview enabled)' : 'active (preview disabled)';
        } else {
          cards.forEach(c => observer.unobserve(c));
          cards.forEach(c => {
            c.classList.remove('in-view','previewing');
            const v = c.querySelector('video'); if (v && !v.__userPlayed) try{ v.pause(); }catch(e){}
          });
          devStatus.textContent = 'paused';
        }
      });

      // Expose for console testing:
      window.__pcObserver = { observer, cards, allowsAutoPreview: canAutoPreview };
    })();
  </script>
</body>
</html>