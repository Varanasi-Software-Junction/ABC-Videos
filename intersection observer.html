<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Intersection Observer Demo</title>
    <style>
        body {
            font-family: sans-serif;
            margin: 0;
            padding: 0;
        }

        .spacer {
            height: 100vh;
            background: #f0f0f0;
        }

        .box {
            margin: 50px auto;
            width: 50%;


            opacity: 0.7;
            /* height: 150px; */
            background: #ccc;
            /* transition: background 0.5s ease; */
            padding: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        @keyframes boxanim {
            0% {
                opacity: 0;
                width: 50%;
                ;
            }

            100% {
                opacity: 1;
                width: 80%;
                height:700px
            }
        }

        .visible {
            animation-name: boxanim;
            animation-timing-function: ease-out;
            animation-iteration-count: 1;
            animation-fill-mode: forwards;
            animation-duration: 300ms;
            background: #4caf50;
            color: white;
            border-style: ridge;
            border-width: 10px;

        }
    </style>
</head>

<body>
    <div class="spacer">Scroll down to see boxes...</div>
    <div id="b1" class="box">

        Box 1
    </div>
    <div>
        <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
        <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
        <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
        <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>

        A

        <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
        <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
        <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
        <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>


    </div>
    <div id="b2" class="box">Box 2</div>
    <div>
        <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
        <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
        <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
        <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>

        B
        <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
        <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
        <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
        <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>

    </div>


    <div id="b3" class="box">Box 3</div>
    <div>
        <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
        <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
        <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
        <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>

        C
        <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
        <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
        <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
        <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>

    </div>



    <div id="b4" class="box">Box 4
    </div>
    <div>
        <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
        <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
        <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
        <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>

        D
        <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
        <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
        <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
        <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>

    </div>





    <div class="spacer"></div>


    <script>

        const boxes = document.querySelectorAll('.box');

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    document.title = entry.target.id + " is visible";


                    entry.target.classList.add('visible');
                    console.log('Visible:', entry.target.id);
                } else {

                    entry.target.classList.remove('visible');
                    document.title = "Not visible";
                }
            });
            console.log("Current visible box id:");
        }, {
            threshold: 0.5
        });

        boxes.forEach(box => observer.observe(box));
    </script>
</body>

</html>